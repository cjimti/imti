<!DOCTYPE html>
<html lang="en-us">
<head><head>
    <meta name="google-site-verification" content="" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="I lead a talented team of software development and creative engineers, covering many industries looking to collect, analyze, move, buffer, queue, process and present data in significant ways. My expertise and that of my team revolve around microservices, artificial intelligence, algorithms, machine learning and blockchain technologies.">
    
    <meta name="keyword"  content="Go, Kubernetes, Elasticsearch, Python, Docker, Big Data, Artificial Intelligence, Machine Learning, Blockchain">
    <link rel="shortcut icon" href="https://mk2.imti.co/img/favicon.ico">

    <title>Don&#39;t Install cqlsh-IMTI | Craig Johnston</title>

    <link rel="canonical" href="https://mk2.imti.co/dont-install-cqlsh/">

    <link rel="stylesheet" href="https://mk2.imti.co/css/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="https://mk2.imti.co/css/bootstrap.min.css">

    
    <link rel="stylesheet" href="https://mk2.imti.co/css/hux-blog.min.css">

    
    <link rel="stylesheet" href="https://mk2.imti.co/css/syntax.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    
    
    <link rel="stylesheet" href="/css/imti.css">

    
    <script src="https://mk2.imti.co/js/jquery.min.js"></script>
    
    
    <script src="https://mk2.imti.co/js/bootstrap.min.js"></script>
    
    
    <script src="https://mk2.imti.co/js/hux-blog.min.js"></script>

    <meta name="twitter:site" content="@cjimti">
<meta name="twitter:creator" content="@cjimti">

<meta name="twitter:description" content="We live in a world of process isolation and tools that make utilizing it extremely simple, with apps like Docker we can perform dependency management with dependency isolation. As I am slowly becoming a fanboy of containerization, I look forward to the day when typing ps on my local workstation or remote server is nearly synonymous with commands like docker ps or kubectl get services.
Case: Cassandra development and your local workstation." />
<meta name="twitter:title" content="Don&#39;t Install cqlsh" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://mk2.imti.co/img/post/eye_876_438.jpg" />
<meta property="og:image" content="https://mk2.imti.co/img/post/eye_876_438.jpg" />



    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://mk2.imti.co/dont-install-cqlsh/"
  },
  "headline": "Don&#39;t Install cqlsh",
  "image": [
    "https://mk2.imti.co/img/post/eye_876_438.jpg"
   ],
  "datePublished": "2018-03-01T00:00:00",
  "dateModified": "2018-03-01T00:00:00",
  "author": {
    "@type": "Person",
    "name": "Craig Johnston"
  },
   "publisher": {
    "@type": "Organization",
    "name": 'imti.co",
    "logo": {
      "@type": "ImageObject",
      "url": "https://mk2.imti.co/img/craig_johnston_cjimti.jpg"
    }
  },
  "description": "We live in a world of process isolation and tools that make utilizing it extremely simple, with apps like Docker we can perform dependency management with dependency isolation. As I am slowly becoming a fanboy of containerization, I look forward to the day when typing ps on my local workstation or remote server is nearly synonymous with commands like docker ps or kubectl get services.
Case: Cassandra development and your local workstation."
}
</script>

</head></head>

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://mk2.imti.co/">IMTI</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="https://mk2.imti.co/">Home</a>
                    </li>
                    

                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header{
        background-image: url('https://mk2.imti.co/img/post/eye.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/cassandra" title="Cassandra">
                        Cassandra
                        </a>
                        
                        <a class="tag" href="/tags/docker" title="Docker">
                        Docker
                        </a>
                        
                        <a class="tag" href="/tags/data" title="Data">
                        Data
                        </a>
                        
                    </div>
                    <h1>Don&#39;t Install cqlsh</h1>
                    <h2 class="subheading">Containers as utility applications</h2>
                    <span  class="meta">Posted by Craig Johnston on Thursday, March 1, 2018
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <p>We live in a world of process isolation and tools that make utilizing it extremely simple, with apps like <a href="https://www.docker.com/">Docker</a> we can perform dependency management with <strong>dependency isolation</strong>. As I am slowly becoming a fanboy of containerization, I look forward to the day when typing <code>ps</code> on my local workstation or remote server is nearly synonymous with commands like <code>docker ps</code> or <code>kubectl get services</code>.</p>

<p>Case: <strong>Cassandra development and your local workstation.</strong></p>

<p>I use <a href="http://cassandra.apache.org/">Apache Cassandra</a> almost daily for my job. A lot of our services require this high performance, highly available database. The command line tool <a href="http://cassandra.apache.org/doc/latest/tools/cqlsh.html"><code>cqlsh</code></a> is the official tool for interacting with Cassandra. <a href="http://cassandra.apache.org/doc/latest/tools/cqlsh.html"><code>cqlsh</code></a> is an easy and intuitive terminal into <a href="http://cassandra.apache.org/">Apache Cassandra</a>, but it has dependencies, one of which is <a href="https://www.python.org/">Python</a>. Over the years of local development on my MacBook Pro, I have had many tools that require <a href="https://www.python.org/">Python</a> and Python libraries. Some of these tools I installed years ago require older versions of Python, or older Python libraries not able to run in newer Python versions. <a href="https://www.python.org/">Python</a> is a great language, but sooner or later you run into dependency nightmares, (see <a href="https://medium.com/knerd/the-nine-circles-of-python-dependency-hell-481d53e3e025">The Nine Circles of Python Dependency Hell</a>) including missing libs, version conflicts, and the list goes on. It makes sense to resolve these issues or use a <a href="https://github.com/pyenv/pyenv">Python version manager</a> like Ruby&rsquo;s <a href="https://rvm.io/">RVM</a> if you are actively developing locally in <a href="https://www.python.org/">Python</a>. But wait, <strong>I&rsquo;m not developing in Python at the moment</strong>, I just want to run <a href="http://cassandra.apache.org/doc/latest/tools/cqlsh.html"><code>cqlsh</code></a>, and it is not the weekend, so I am not motivated to Google my Python version conflicts and library dependency errors because I have a ton of work to get done. Yes, my problems, likely caused by something dumb I did playing around with the questionable code I found in the far-off corners of Github.</p>

<p>So I&rsquo;m going to ignore my confused local install of <code>cqlsh</code>, the broken state of my Python and the mess I made of its libraries. I&rsquo;m just going to run:</p>

<pre><code class="language-bash">docker run -it --rm cassandra cqlsh node1.example.com -u itsme -p mypassword`
</code></pre>

<p>It&rsquo;s a one time pull of the <a href="https://hub.docker.com/_/cassandra/">Cassandra Docker</a> image and once done the <code>--rm</code> flag cleans up the stopped container.</p>

<p>But that&rsquo;s a lot of command for me to think about when I just need my <code>cqlsh</code> so I add a simple alias to my <code>.bashrc</code></p>

<pre><code class="language-bash">alias cqlsh='docker run -it --rm cassandra cqlsh` 
</code></pre>

<p>From now on I run the command <code>cqlsh</code> and get just that, will all its dependencies in isolation, not worried about Python versions or state of my local workstation. Just keep Docker running well, and I&rsquo;m good.</p>

<p>The alias above is helpful for the times I just want a cqlsh terminal to issue a few commands. However, I often need to pass cql scripts into <a href="http://cassandra.apache.org/doc/latest/tools/cqlsh.html"><code>cqlsh</code></a>. So I updated my alias to always mount my current directory into a <code>/src</code> directory in the container. All I have have to remember is that that path to a local file is <code>./src</code> and not <code>./</code>.</p>

<pre><code class="language-bash">alias cqlsh='docker run -it --rm -v &quot;$(pwd)&quot;:/src cassandra cqlsh
</code></pre>

<p>This allows me to run commands that pass in files, like:</p>

<pre><code class="language-bash">$ cqlsh node1.example.com 9042 -f /src/setup_some_keyspace_and_tables.cql
</code></pre>

<p>The <a href="https://hub.docker.com/_/cassandra/">Cassandra Docker</a> image is 323MB, and when run without a command will start up a fully functional Cassandra node, which is useful for testing. However, if this is not something you need, then a 323MB image is a bit overkill. You can always make a small Docker image using [Alpine Linux], adding only the packages you need. However, that is a subject of another article I suppose.</p>


                
<div id="disqus-comment"></div>



            </div>
            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/data" title="Data">
                        Data
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/docker" title="Docker">
                        Docker
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/kubernetes" title="Kubernetes">
                        Kubernetes
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/utils" title="Utils">
                        Utils
                        </a>
                        
                        
                        
                        
                        
                        
                        
                        <a href="/tags/kubectl" title="kubectl">
                        kubectl
                        </a>
                        
                        
                        
                        
                        
                        
                    </div>
                </section>

                
                <hr>
                <h5>RELATED</h5>
                <ul class="list-inline">
                    
                </ul>
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href="" rel="alternate" type="application/rss+xml" title="IMTI" >
                           <span class="fa-stack fa-lg">
                               <i class="fa fa-circle fa-stack-2x"></i>
                               <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:cjimti@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    <li>
                        <a href="https://twitter.com/cjimti">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    

                    

		    
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/cjimti">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/cjimti/">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                </ul>
		<p class="copyright text-muted">
            Copyright &copy; <a href="">Craig Johnston</a> , 2018
                </p>
            </div>
        </div>
    </div>
</footer>




<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>



    
        
        
    





</body>
</html>
