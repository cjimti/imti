<!DOCTYPE html>
<html lang="en-us">
<head><head>
    <meta name="msvalidate.01" content="DBC34551F2DD1BA3DC0D62EE46D7448F" />
    <meta name="google-site-verification" content="DrtKc88u9uc7iptd4LyURAKBmFcOn7Kuk6HcRk_kNmo" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    
    <script data-cfasync="false">
        (function() {
            var savedTheme = localStorage.getItem('theme');
            var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            var theme = savedTheme || (prefersDark ? 'dark' : 'light');
            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
        })();
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="I lead a talented team of software development and creative engineers, covering many industries looking to collect, analyze, move, buffer, queue, process and present data in significant ways. My expertise and that of my team revolve around microservices, artificial intelligence, algorithms, and machine learning.">
    
    <meta name="keyword"  content="Go, Kubernetes, Elasticsearch, Python, Docker, Big Data, Artificial Intelligence, Machine Learning">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Nginx - IMTI - Craig Johnston</title>

    <link rel="canonical" href="https://imti.co/tags/nginx/">

    
    <link rel="stylesheet" href="../../css/bootstrap.min.css">

    
    <link rel="stylesheet" href="../../css/hux-blog.min.css">

    
    <link rel="stylesheet" href="../../css/syntax.css">

    
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    
    
    <link rel="stylesheet" href="../../css/imti.css">

    
    <script src="../../js/jquery.min.js"></script>

    
    <script src="../../js/bootstrap.min.js"></script>

    
    <script src="../../js/hux-blog.min.js"></script>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-5984764595236029",
            enable_page_level_ads: true
        });
    </script>

    <meta name="twitter:site" content="@cjimti">
<meta name="twitter:creator" content="@cjimti">

<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="IMTI" />
<meta name="twitter:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:title" content="IMTI" />
<meta property="og:description" content="" />


    

</head>
</head>

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../">IMTI</a>
        </div>

        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="../../">Home</a>
                    </li>
                    <li>
                        <a href="../../about/">About</a>
                    </li>
                    <li>
                        <a href="https://twitter.com/cjimti">Follow</a>
                    </li>
                    

                    
                    <li>
                        <a href="javascript:void(0)" class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark/light mode">
                            <i class="fa fa-moon-o" id="theme-icon"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
            $navbar.className = " ";
            setTimeout(function(){
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>



<header class="intro-header" style="background-image: url('https://imti.co/img/imti.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 ">
                <div class="site-heading">
                    <h1>IMTI</h1>
                    
		            <span class="subheading">Architecting, Developing, SRE, DevOps, AI/ML</span>
                </div>
            </div>
        </div>
    </div>
</header>



  
<div class="container">
    <div class="row">
        
        
   	    <div class="
            col-lg-8 col-lg-offset-1
            col-md-8 col-md-offset-1
            col-sm-12
            col-xs-12
            post-container
        ">
            

<div class="post-preview">
    <a href="https://imti.co/web-cluster-ingress/">
        <h2 class="post-title">
            Ingress on Custom Kubernetes
        </h2>
	
        <h3 class="post-subtitle">
            Setting up ingress-nginx on a custom cluster.
        </h3>
	
        <div class="post-content-preview">
	
            <p>There are more than a handful of ways to set up port <strong>80</strong> and <strong>443</strong> web <a href="https://github.com/kubernetes/ingress-nginx">ingress</a> on a custom <a href="https://kubernetes.io/">Kubernetes</a> cluster. Specifically a bare metal cluster. If you are looking to experiment or learn on a non-production cluster, but something more true to production than <a href="https://kubernetes.io/docs/getting-started-guides/minikube/">minikube</a>, I suggest you check out my previous article <a href="../../hobby-cluster/">Production Hobby Cluster</a>, a step-by-step guide for setting up a custom production capable Kubernetes cluster.</p>
<p>This article builds on the <a href="../../hobby-cluster/">Production Hobby Cluster</a> guide. The following closely the official <a href="https://github.com/kubernetes/ingress-nginx/blob/master/docs/deploy/index.md">deploy ingress</a> Installation Guide with a few adjustments suitable for the <a href="../../hobby-cluster/">Production Hobby Cluster</a>, specifically the use of a <a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/">DaemonSet</a> rather than a <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a> and leveraging <strong>hostNetwork</strong> and <strong>hostPort</strong> for the <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod/">Pod</a>s on our <a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/">DaemonSet</a>. There are quite a few <a href="https://github.com/kubernetes/ingress-nginx/tree/master/docs/examples">ingress nginx examples</a> in the official repository if you are looking for a more specific implementation.</p>
       
        </div>
    </a>
    <p class="post-meta">
        Posted by <a href="https://twitter.com/cjimti">Craig Johnston</a> Tuesday, May 15, 2018
    </p>
</div>
<hr>

<div class="post-preview">
    <a href="https://imti.co/413-request-entity-too-large/">
        <h2 class="post-title">
            Kubernetes - 413 Request Entity Too Large
        </h2>
	
        <h3 class="post-subtitle">
            Configuring the NGINX Ingress Controller
        </h3>
	
        <div class="post-content-preview">
	
            <p>When setting up <a href="https://github.com/kubernetes/ingress-nginx">nginx ingress</a> on <a href="https://kubernetes.io/">Kubernetes</a> for a private <a href="https://hub.docker.com/_/registry/">Docker Registry</a>, I ran into an error when trying to push an image to it.</p>
<pre tabindex="0"><code>Error parsing HTTP response: invalid character &#39;&lt;&#39; looking for beginning of value: &#34;&lt;html&gt;\r\n&lt;head&gt;&lt;title&gt;413 Request Entity Too Large&lt;/title&gt;&lt;/head&gt;\r\n&lt;body bgcolor=\&#34;white\&#34;&gt;\r\n&lt;center&gt;&lt;h1&gt;413 Request Entity Too Large&lt;/h1&gt;&lt;/center&gt;\r\n&lt;hr&gt;&lt;center&gt;nginx/1.9.14&lt;/center&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n&#34;
</code></pre><p>The &ldquo;413 Request Entity Too Large&rdquo; error is something many accustomed to running <a href="https://www.nginx.com/">nginx</a> as a standard web server/proxy. <a href="https://www.nginx.com/">nginx</a> is configured to restrict the size of files it will allow over a post. This restriction helps avoid some DoS attacks. The default values are easy to adjust in the Nginx configuration. However, in the <a href="https://kubernetes.io/">Kubernetes</a> world things are a bit different. I prefer to do things the <a href="https://kubernetes.io/">Kubernetes</a> way; however, there is still a lack of established configuration idioms, since part of its appeal is flexibility. One thousand different ways of doing something means ten thousand variations of remedies to every potential problem. Googling errors in the <a href="https://kubernetes.io/">Kubernetes</a> world leads to a mess of solutions not always explicitly tied to an implementation. I am hoping that as <a href="https://kubernetes.io/">Kubernetes</a> continues to gain popularity more care will be taken to provide context for solutions to common problems.</p>
       
        </div>
    </a>
    <p class="post-meta">
        Posted by <a href="https://twitter.com/cjimti">Craig Johnston</a> Saturday, March 24, 2018
    </p>
</div>
<hr>


            



       	</div>
        
<div class="
    col-lg-3 col-lg-offset-0
    col-md-3 col-md-offset-0
    col-sm-12
    col-xs-12
    sidebar-container
">
    
    
    <section>
        <hr class="hidden-sm hidden-xs">
        <h5>FEATURED TAGS</h5>
        <div class="tags">
            
            
            
            <a href="../../tags/ai" title="ai">
            ai
            </a>
            
            
            
            <a href="../../tags/blockchain" title="blockchain">
            blockchain
            </a>
            
            
            
            
            
            
            
            <a href="../../tags/data" title="data">
            data
            </a>
            
            
            
            <a href="../../tags/data-science" title="data science">
            data science
            </a>
            
            
            
            
            
            
            
            <a href="../../tags/development" title="development">
            development
            </a>
            
            
            
            <a href="../../tags/devops" title="devops">
            devops
            </a>
            
            
            
            
            
            <a href="../../tags/docker" title="docker">
            docker
            </a>
            
            
            
            <a href="../../tags/elasticsearch" title="elasticsearch">
            elasticsearch
            </a>
            
            
            
            
            
            
            
            
            
            
            
            <a href="../../tags/golang" title="golang">
            golang
            </a>
            
            
            
            
            
            <a href="../../tags/ingress" title="ingress">
            ingress
            </a>
            
            
            
            <a href="../../tags/iot" title="iot">
            iot
            </a>
            
            
            
            
            
            
            
            
            
            
            
            <a href="../../tags/kubectl" title="kubectl">
            kubectl
            </a>
            
            
            
            <a href="../../tags/kubefwd" title="kubefwd">
            kubefwd
            </a>
            
            
            
            <a href="../../tags/kubernetes" title="kubernetes">
            kubernetes
            </a>
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a href="../../tags/mcp" title="mcp">
            mcp
            </a>
            
            
            
            
            
            <a href="../../tags/microservices" title="microservices">
            microservices
            </a>
            
            
            
            
            
            
            
            
            
            <a href="../../tags/python" title="python">
            python
            </a>
            
            
            
            <a href="../../tags/raspberry-pi" title="raspberry pi">
            raspberry pi
            </a>
            
            
            
            
            
            <a href="../../tags/security" title="security">
            security
            </a>
            
            
            
            
            
            
            
            
            
            <a href="../../tags/utils" title="utils">
            utils
            </a>
            
            
            
            
            
            
        </div>
    </section>
    

    
    <section class="visible-md visible-lg">
        <hr>
        <h5><a href="../../about/">ABOUT ME</a></h5>
        <div class="short-about">
            
            <a href="../../about/"><img src="https://imti.co/img/avatar-cj.jpg"/></a>
            
            
            <p>I lead a talented team of software development and creative engineers, covering many industries looking to collect, analyze, move, buffer, queue, process and present data in significant ways. My expertise and that of my team revolve around microservices, artificial intelligence, algorithms, and machine learning.</p>
            
            
            <ul class="list-inline">
                
                <li>
                    <a href="../../tags/nginx/index.xml" rel="alternate" type="application/rss+xml"
                       title="IMTI" >
                    <span class="fa-stack fa-lg">
                           <i class="fa fa-circle fa-stack-2x"></i>
                           <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                       </span>
                    </a>
                </li>
                
                
                <li>
                    <a href="https://twitter.com/cjimti">
                       <span class="fa-stack fa-lg">
                           <i class="fa fa-circle fa-stack-2x"></i>
                           <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                       </span>
                    </a>
                </li>
                
                
                
                
                
                
                <li>
                    <a target="_blank" href="https://github.com/cjimti">
                       <span class="fa-stack fa-lg">
                           <i class="fa fa-circle fa-stack-2x"></i>
                           <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                       </span>
                    </a>
                </li>
                
                
                <li>
                    <a target="_blank" href="https://www.linkedin.com/in/cjimti/">
                       <span class="fa-stack fa-lg">
                           <i class="fa fa-circle fa-stack-2x"></i>
                           <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                       </span>
                    </a>
                </li>
                
            </ul>
        </div>
    </section>
    
    

    
    <hr>
    <h5>BOOKMARKS</h5>
    <ul class="bookmarks">
        
        <li><a target="_blank" href="https://www.amazon.com/Craig-Johnston/e/B001K80LWI/ref=ntt_dp_epwbk_0">Author</a></li>
        
        <li><a target="_blank" href="https://deasil.works/">Deasil Works</a></li>
        
        <li><a target="_blank" href="https://github.com/txn2">TXN2 Microservices</a></li>
        
        <li><a target="_blank" href="https://amzn.to/2Ot1ft3">Merch</a></li>
        
        <li><a target="_blank" href="https://news.ycombinator.com/">Hacker News</a></li>
        
        <li><a target="_blank" href="https://news.ycombinator.com/submitted?id=cjimti">Hacker News (cjimti)</a></li>
        
    </ul>

    <hr>
    <h5>REDDIT</h5>
    <ul class="bookmarks">
        
        <li><a target="_blank" href="https://www.reddit.com/user/imti_co/posts/">user/imti_co</a></li>
        
        <li><a target="_blank" href="https://www.reddit.com/r/programming/">r/programming</a></li>
        
        <li><a target="_blank" href="https://www.reddit.com/r/golang/">r/golang</a></li>
        
        <li><a target="_blank" href="https://www.reddit.com/r/python/">r/python</a></li>
        
        <li><a target="_blank" href="https://www.reddit.com/r/kubernetes/">r/kubernetes</a></li>
        
        <li><a target="_blank" href="https://www.reddit.com/r/docker/">r/docker</a></li>
        
        <li><a target="_blank" href="https://www.reddit.com/r/elasticsearch/">r/elasticsearch</a></li>
        
        <li><a target="_blank" href="https://www.reddit.com/r/apachekafka/">r/apachekafka</a></li>
        
    </ul>

    <hr>
    <h5>AWESOME</h5>
    <ul class="bookmarks">
        
        <li><a target="_blank" href="https://github.com/ramitsurana/awesome-kubernetes">Kubernetes</a></li>
        
        <li><a target="_blank" href="https://github.com/rootsongjc/awesome-cloud-native">Cloud Native</a></li>
        
        <li><a target="_blank" href="https://github.com/thibmaek/awesome-raspberry-pi">Raspberry Pi</a></li>
        
    </ul>

    <hr>
    <h5>DOCKER CONTAINERS</h5>
    <ul class="bookmarks">
        
        <li><a target="_blank" href="https://hub.docker.com/r/txn2/n2proxy/">n2proxy</a></li>
        
        <li><a target="_blank" href="https://hub.docker.com/r/cjimti/iotwifi/">iotwifi</a></li>
        
        <li><a target="_blank" href="https://hub.docker.com/r/cjimti/irsync/">irsync</a></li>
        
        <li><a target="_blank" href="https://hub.docker.com/r/txn2/rxtx/">rxtx</a></li>
        
        <li><a target="_blank" href="https://hub.docker.com/r/txn2/rtbeat/">rtbeat</a></li>
        
        <li><a target="_blank" href="https://hub.docker.com/r/txn2/asws/">asws</a></li>
        
        <li><a target="_blank" href="https://hub.docker.com/r/txn2/txtoken/">txtoken</a></li>
        
        <li><a target="_blank" href="https://hub.docker.com/r/txn2/kubefwd/">kubefwd</a></li>
        
    </ul>
</div>

	</div>
</div>





<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href="../../tags/nginx/index.xml" rel="alternate" type="application/rss+xml" title="IMTI" >
                           <span class="fa-stack fa-lg">
                               <i class="fa fa-circle fa-stack-2x"></i>
                               <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:cjimti@gmail.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    <li>
                        <a href="https://twitter.com/cjimti">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/cjimti">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/cjimti/">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                </ul>
            </div>
        </div>
    </div>
</footer>


<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<script>
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-R56SP4WLS2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R56SP4WLS2');
</script>


<script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({ theme: 'neutral' });
  mermaid.run();
</script>


<script data-cfasync="false">
(function() {
    var themeToggle = document.getElementById('theme-toggle');
    var themeIcon = document.getElementById('theme-icon');

    function getCurrentTheme() {
        return document.documentElement.getAttribute('data-theme') || 'light';
    }

    function updateIcon() {
        var currentTheme = getCurrentTheme();
        if (themeIcon) {
            if (currentTheme === 'dark') {
                themeIcon.className = 'fa fa-sun-o';
            } else {
                themeIcon.className = 'fa fa-moon-o';
            }
        }
    }

    function toggleTheme() {
        var currentTheme = getCurrentTheme();
        var newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        if (newTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        } else {
            document.documentElement.removeAttribute('data-theme');
        }

        localStorage.setItem('theme', newTheme);
        updateIcon();
    }

    updateIcon();

    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }

    if (window.matchMedia) {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
            if (!localStorage.getItem('theme')) {
                if (e.matches) {
                    document.documentElement.setAttribute('data-theme', 'dark');
                } else {
                    document.documentElement.removeAttribute('data-theme');
                }
                updateIcon();
            }
        });
    }
})();
</script>

</body>
</html>
